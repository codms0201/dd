<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="script.js"></script>
    <title>Edit Word</title>
</head>
<body>
    <h1>Edit Word</h1>
    <button onclick="editSelectedWord()">Edit Word</button>

    <div id="wordList"></div>

    <script>
        function editSelectedWord() {
            let keyword = prompt("수정할 단어를 입력하세요:");

            if (keyword === null) {
                // 사용자가 취소 버튼을 누르면 아무것도 하지 않음
                return;
            }

            keyword = keyword.trim(); // 키워드 양쪽의 공백을 제거

            if (!validateInput(keyword)) {
                alert("유효하지 않은 키워드입니다.");
                return;
            }

            let matchingWords = [];

            for (let i = 0; i < wordList.length; i++) {
                if (wordList[i].word.includes(keyword)) {
                    matchingWords.push({ index: i, word: wordList[i] });
                }
            }

            if (matchingWords.length === 0) {
                alert("일치하는 단어를 찾을 수 없습니다.");
                return;
            }

            let options = "일치하는 단어를 선택하세요:\n";
            for (let i = 0; i < matchingWords.length; i++) {
                options += `${i + 1}. ${matchingWords[i].word.word} - ${matchingWords[i].word.meaning}\n`;
            }

            let selectedWordIndex = prompt(options);

            if (selectedWordIndex === null) {
                // 사용자가 취소 버튼을 누르면 아무것도 하지 않음
                return;
            }

            selectedWordIndex = parseInt(selectedWordIndex) - 1;

            if (isNaN(selectedWordIndex) || selectedWordIndex < 0 || selectedWordIndex >= matchingWords.length) {
                alert("올바르지 않은 번호입니다.");
                return;
            }

            let newMeaning = prompt("새로운 뜻을 입력하세요:");

            if (newMeaning === null) {
                // 사용자가 취소 버튼을 누를 경우 아무것도 하지 않음
                return;
            }

            newMeaning = newMeaning.trim(); // 뜻 양쪽의 공백을 제거

            if (!validateInput(newMeaning)) {
                alert("유효하지 않은 뜻입니다.");
                return;
            }

            wordList[matchingWords[selectedWordIndex].index].meaning = newMeaning;

            alert("단어가 수정되었습니다.");
            displayAllWords(); // 수정 후 단어 목록을 갱신해서 보여줍니다.
        }
    </script>
</body>
</html>
